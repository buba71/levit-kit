# AGENT_ONBOARDING.md

> [!IMPORTANT]
> **To the AI Agent reading this**: You are entering a **Symfony** project governed by the **Levit-Kit** protocol. This document is your operating manual for this specific environment.

## 1. Project Essence
This project is a **Symfony application** in a hybrid workspace where humans define intentions and AI ensures execution.
- **Human Role**: Vision, decision-making, final validation.
- **AI Role (You)**: Implementation, proactive suggestions, technical consistency.
- **Framework**: Symfony 6.4+ with PHP 8.2+

## 2. Navigation & Context
To understand this project quickly, explore in this order:
1.  `SOCIAL_CONTRACT.md`: Your ethical and operational boundaries.
2.  `features/`: The roadmap and logic of what we are building.
3.  `.levit/decisions/`: History of technical choices (ADRs).
4.  `.levit/handoff/`: Specific context for your current mission.
5.  `.levit/workflows/`: Step-by-step guides for common tasks.
6.  `composer.json`: Project dependencies and configuration.
7.  `config/`: Symfony configuration files.

## 3. Symfony-Specific Rules

### Code Organization
- **Controllers**: `src/Controller/` - Handle HTTP requests
- **Entities**: `src/Entity/` - Doctrine ORM entities
- **Services**: `src/Service/` - Business logic (autowired)
- **Repositories**: `src/Repository/` - Data access layer
- **Forms**: `src/Form/` - Symfony forms
- **Events**: `src/Event/` - Domain events
- **Tests**: `tests/` - PHPUnit tests

### Coding Standards
- **PSR-12**: Follow PHP-FIG PSR-12 coding standard
- **Type Hints**: Always use type hints for parameters and return types
- **Docblocks**: Document public methods with PHPDoc
- **Naming**: Use Symfony naming conventions (camelCase for methods, PascalCase for classes)

### Symfony Best Practices
- Use **Dependency Injection** - Never use `new` for services
- Use **Service Autowiring** - Let Symfony resolve dependencies
- Use **Doctrine ORM** - For database operations
- Use **Symfony Console** - For CLI commands
- Use **Event Dispatcher** - For decoupled communication
- Use **Form Component** - For user input handling

### Testing
- Write **PHPUnit tests** for all new features
- Place tests in `tests/` directory
- Use Symfony's test client for HTTP tests
- Mock external dependencies

## 4. Rules of Engagement
- **Transparency**: If you are unsure about a decision, ask the human. Do not "hallucinate" architectural choices.
- **Atomicity**: Keep your edits small and focused.
- **Traceability**: Every major change should be linked to a feature defined in `features/`.
- **Tests First**: Before submitting a complex change, check if tests exist in `tests/` and run them with `composer test`.
- **Symfony Conventions**: Always follow Symfony best practices and conventions.

## 5. Common Symfony Tasks

### Creating a Controller
```php
<?php
namespace App\Controller;

use Symfony\Bundle\FrameworkBundle\Controller\AbstractController;
use Symfony\Component\HttpFoundation\Response;
use Symfony\Component\Routing\Annotation\Route;

class MyController extends AbstractController
{
    #[Route('/my-route', name: 'my_route')]
    public function index(): Response
    {
        return $this->render('my_template.html.twig');
    }
}
```

### Creating an Entity
```php
<?php
namespace App\Entity;

use Doctrine\ORM\Mapping as ORM;

#[ORM\Entity]
#[ORM\Table(name: 'my_entity')]
class MyEntity
{
    #[ORM\Id]
    #[ORM\GeneratedValue]
    #[ORM\Column]
    private ?int $id = null;
    
    // ... properties and methods
}
```

### Creating a Service
```php
<?php
namespace App\Service;

class MyService
{
    public function __construct(
        private SomeDependency $dependency
    ) {
    }
    
    public function doSomething(): void
    {
        // Implementation
    }
}
```

## 6. How to use Workflows
Check `.levit/workflows/` before starting a task. If a workflow like `add-logic.md` exists, follow its steps strictly to maintain project harmony.

---
*Generated by Levit-Kit - Elevating Human-AI Collaboration for Symfony.*
